@startuml

title US022 - As Project Manager, I want to create a sprint.

autoactivate on
autonumber

participant ": CreateSprintRoute" as UI
participant ": CreateSprintController" as Ctrl
participant ": CreateSprintService" as createSprintService
participant ": SprintDTO" as sprintDTO
participant ": ISprintFactory" as sprintFactory
participant " newSprint : Sprint" as sprint
participant ": ISprintStore" as sprintStore
participant ": SprintMapper" as sprintMapper
participant "outputDTO: OutPutSprintDTO" as outputDTO


[o-> UI: POST/sprints(json)
UI -> Ctrl: createSprint(json)
note right
Change from json to dto hidden to simplify diagram
end note
Ctrl -> createSprintService: createSprint(sprintDTO)
createSprintService -> sprintDTO: projectID = getProjectID()
deactivate
createSprintService -> sprintDTO: sprintID = getSprintID()
deactivate
createSprintService -> sprintDTO: name = getName()
deactivate
createSprintService -> sprintFactory: createSprint(projectID, sprintID, name)
sprintFactory -> sprint**: create()
sprintFactory --> createSprintService: newSprint
createSprintService -> sprintStore: saveSprint(newSprint)
sprintStore -> sprintStore: existsBySprintID(sprintID)
deactivate
sprintStore -> sprintStore: add(newSprint)
deactivate
sprintStore --> createSprintService: true
createSprintService -> sprintMapper: toDTO(newsprint)
sprintMapper -> outputDTO**: create()
sprintMapper --> createSprintService: outputDTO
createSprintService --> Ctrl: outputDTO
Ctrl --> UI: outputJson
note right
Change from json to dto hidden to simplify diagram
end note
[<--UI : Informs Operation Success
@enduml