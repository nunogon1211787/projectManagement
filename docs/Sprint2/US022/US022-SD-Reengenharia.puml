@startuml

title US022 - As Project Manager, I want to create a sprint.

autoactivate on
autonumber

participant ": CreateSprintRoute" as UI
participant ": CreateSprintController" as Ctrl
participant ": CreateSprintService" as createSprintService
participant ": ISprintFactory" as sprintFactory
participant " sprintDTO : SprintDTO" as sprintDTO
participant " newSprint : Sprint" as sprint
participant ": ISprintStore" as sprintStore
participant ": SprintMapper" as sprintMapper
participant "outPutSprintDTO: SprintDTO" as outPutSprintDTO


[o-> UI: POST/sprints(json)
UI -> Ctrl: createSprint(json)
note right
Change from json to dto hidden to simplify diagram
end note
Ctrl -> createSprintService: createSprint(sprintDTO)
createSprintService -> sprintFactory: createSprint(sprintDTO)
sprintFactory -> sprintDTO: projectID = getProjectID()
deactivate
sprintFactory -> sprintDTO: sprintID = getSprintID()
deactivate
sprintFactory -> sprintDTO: name = getName()
deactivate
sprintFactory -> sprint**: create()
sprintFactory --> createSprintService: newSprint
createSprintService -> sprintStore: saveSprint(newSprint)
sprintStore -> sprintStore: existsBySprintID(sprintID)
deactivate
sprintStore -> sprintStore: add(newSprint)
deactivate
sprintStore --> createSprintService: true
createSprintService -> sprintMapper: toDTO(newsprint)
sprintMapper -> outPutSprintDTO**: create()
sprintMapper --> createSprintService: outPutSprintDTO
createSprintService --> Ctrl: outPutSprintDTO
Ctrl --> UI: outputJson
note right
Change from json to dto hidden to simplify diagram
end note
[<--UI : Informs Operation Success
@enduml