@startuml
'https://plantuml.com/class-diagram

title US005 - As a Director, I want to create/register a new project

autoactivate on
autonumber


participant ":CreateProjectRoute " as route
participant ":CreateProjectController " as controller
participant ":ProjectService " as service
participant ":ProjectStore " as store
participant ":ProjectFactory " as factory
participant ":ProjectMapper " as mapper
participant "projDTO:ProjectDTO " as dto
participant "proj:Project " as project


[o->  route: CreateProject/Projects
route -> controller: createProject(jsonDto)

note right
Change from json to dto hidden to simplify diagram
end note

controller -> service: createAndSave(dto)
service -> factory: createProject(dto.getName, dto.getDescription, dto.getStartDate, dto.getNumberOfSprints, dto.getBudget)

factory -> project**: create()

factory --> service: proj

service -> store: saveProject(proj)
store -> store: validate(proj)
deactivate store
store -> store: add(proj)
deactivate store

store --> service: true

service -> mapper: model2DTO(proj)

mapper -> dto**: model2DTO(proj)

mapper --> service: outputDTO

service --> controller: outputDTO

note right
Change from json to dto hidden to simplify diagram
end note

controller --> route: outputJson

[<-- route: response

@enduml

